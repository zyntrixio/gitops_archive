apiVersion: apps/v1
kind: Deployment
metadata:
  name: demeter
spec:
  template:
    spec:
      containers:
      - name: app
        env:
        - name: AMEX_SERVER
          valueFrom:
            secretKeyRef:
              name: demeter
              key: AMEX_SERVER
        - name: AMEX_USER
          valueFrom:
            secretKeyRef:
              name: demeter
              key: AMEX_USER
        - name: AMEX_PASSWORD
          valueFrom:
            secretKeyRef:
              name: demeter
              key: AMEX_PASSWORD
        - name: TX_BLOB_STORAGE_ACCOUNT
          valueFrom:
            secretKeyRef:
              name: azure-storage-common
              key: account
        - name: TX_BLOB_STORAGE_TOKEN
          valueFrom:
            secretKeyRef:
              name: azure-storage-common
              key: key
        - name: TX_BLOB_STORAGE_CONTAINER
          value: harmonia-imports
        - name: MID_BLOB_STORAGE_ACCOUNT
          valueFrom:
            secretKeyRef:
              name: demeter
              key: MID_BLOB_STORAGE_ACCOUNT
        - name: MID_BLOB_STORAGE_TOKEN
          valueFrom:
            secretKeyRef:
              name: demeter
              key: MID_BLOB_STORAGE_TOKEN
        - name: MID_BLOB_STORAGE_CONTAINER
          valueFrom:
            secretKeyRef:
              name: demeter
              key: MID_BLOB_STORAGE_CONTAINER
