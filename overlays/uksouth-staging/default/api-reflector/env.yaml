apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-reflector
spec:
  template:
    spec:
      containers:
      - name: app
        env:
        - name: postgres_dsn
          valueFrom:
            secretKeyRef:
              name: azure-pgfs
              key: common_api_reflector
        - name: azure_auth_enabled
          value: "true"
        - name: use_x_forwarded_proto
          value: "true"
        - name: azure_client_id
          value: 2fc1ff48-b316-494f-95a2-fe506d503992
        # is an actual secret, should find a better way of doing this in future
        - name: azure_client_secret
          value: -6D609vtIPcNdYaixp56~Gy.1bL-g1mxrT
        - name: azure_tenant
          value: a6e2367a-92ea-4e5a-b565-723830bcc095
        - name: log_json
          value: "true"
        - name: secret_key
          value: FRwO8oio4SCn4bZ0Rs9tZ8H0g8au6NiV
          # generated with: LC_ALL=C tr -dc A-Za-z0-9 </dev/urandom | head -c 32
          # Not a real secret value, just something Flask uses
